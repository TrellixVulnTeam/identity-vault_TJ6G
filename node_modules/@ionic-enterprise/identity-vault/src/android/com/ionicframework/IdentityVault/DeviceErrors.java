package com.ionicframework.IdentityVault;

import org.json.JSONException;
import org.json.JSONObject;

public class DeviceErrors {

    public static final int ERR_UNHANDLED = 0;
    public static final int ERR_INVALID_ARGUMENTS = 1;

    public static JSONObject toJSON(DeviceError e) {
        if (e instanceof DeviceInvalidArgumentsError) {
            String defaultErr = "Invalid Arguments Provided: ";
            String detail = e.getMessage();
            String err = detail == null ? defaultErr : defaultErr + detail;
            return DeviceErrors.getJSON(ERR_INVALID_ARGUMENTS, err);
        } else {
            String defaultErr = "Unhandled Error: ";
            String detail = e.getMessage();
            String err = detail == null ? defaultErr : defaultErr + detail;
            return DeviceErrors.getJSON(ERR_UNHANDLED, err);
        }
    }

    private static JSONObject getJSON(int code, String msg) {
        JSONObject ret = new JSONObject();
        try {
            ret.put("code", code);
            ret.put("message", msg);
            return ret;
        } catch (JSONException e) {
            return ret;
        }
    }
}

class DeviceError extends Throwable {

    DeviceError() {}

    DeviceError(String msg) {
        super(msg);
    }
}

class DeviceInvalidArgumentsError extends DeviceError {

    DeviceInvalidArgumentsError(String msg) {
        super(msg);
    }
}
